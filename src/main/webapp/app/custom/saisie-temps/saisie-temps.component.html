<div>
    <div class="row justify-content-center">
        <div class="col-md-12">
            <h2>Rapport d'Activit√©</h2>

            <h5 class="pt-3 pb-2">Saisie des Imputations</h5>

            <div>
                <p-table [value]="mapImputations">
                    <ng-template pTemplate="header">
                        <tr>
                            <th [attr.colspan]="calendrierImputations.length + 2" class="temps-header">Imputations</th>
                        </tr>
                        <tr>
                            <th class="temps-header">Type</th>
                            <th *ngFor="let journee of calendrierImputations | orderBy:'jour'"
                                class="{{(journee.type=='WE' || journee.type=='FERIE') ? 'temps-header-we-ferie' : 'temps-header'}}">
                                {{ journee.jour }}
                            </th>
                            <th class="temps-header">Totaux</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData>
                        <tr>
                            <td class="col-width-120">{{ rowData.type }}</td>
                            <td *ngFor="let imputation of rowData.imputations | orderBy:'jour'" pEditableColumn
                                [ngClass]="isJourWeOuFerie(imputation) ? 'temps-header-we-ferie':'temps-header'">
                                <p-cellEditor>
                                    <ng-template pTemplate="input"
                                                 *ngIf="!isJourWeOuFerie(imputation)">
                                        <input type="text" [(ngModel)]="imputation.duree">
                                    </ng-template>
                                    <ng-template pTemplate="output">
                                        {{imputation.duree}}
                                    </ng-template>
                                </p-cellEditor>
                            </td>
                            <td class="col-width-90">Total</td>
                        </tr>
                    </ng-template>

                    <ng-template pTemplate="summary" let-rowData>
                        <div style="text-align:left">
                            <button type="button" pButton icon="fa-plus" (click)="addLigne()" label="Ajouter une ligne"></button>
                        </div>
                    </ng-template>
                </p-table>
            </div>
        </div>

        <div class="col-md-8">
            <h5 class="pt-3 pb-2">Commentaires</h5>
            <div class="force-width-100 pb-2">
                <textarea class="force-width-100" [rows]="4" pInputTextarea [(ngModel)]="commentaire"></textarea>
            </div>

            <h5 class="pt-3 pb-2">Historique des Commentaires</h5>
            <div class="force-width-100 pb-2">
                <div  *ngFor="let commentaireHistorise of historiqueCommentaires | orderBy:'id':true" class="bloc-commentaire">
                    <div class="date-commentaire">
                        Par <span class="text-medium-pink-lr">{{ commentaireHistorise.auteur }}</span> le <span class="text-medium-pink-lr">{{ commentaireHistorise.dateSaisie }}</span>
                    </div>
                    <div>{{ commentaireHistorise.libelle }}</div>
                    <br>
                </div>
            </div>
            <div class="pt-2">
                <button pButton type="button" class="pink-lr" label="Enregistrer"></button>
                <button pButton type="button" class="pink-lr" label="Valider"></button>
            </div>
        </div>
    </div>
</div>
